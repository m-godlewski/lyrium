{% extends "base.html" %}

{% block content %}

    <!-- main container -->
    <div style="position: relative; height:20vh; width:40vw">
        <!-- artist information container -->
        <div class="pb-5">
            <!-- artist name -->
            <h1>{{data.artist_name}}</h1>
            <!-- artist biography -->
            <p>
                Lorem Ipsum is simply dummy text of the printing and typesetting industry.
                Lorem Ipsum has been the industry's standard dummy text ever since the 1500s,
                when an unknown printer took a galley of type and scrambled it to make a type
                specimen book. It has survived not only five centuries, but also the leap into electronic typesetting,
                remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets
                containing Lorem Ipsum passages, and more recently with desktop publishing software
                like Aldus PageMaker including versions of Lorem Ipsum.
            </p>
            <!-- artist image -->
            <img src="{{data.artist_image_url}}" class="img-fluid">
        </div>
        <!-- charts containers -->
        <div class="pb-5 pt-5">
            <center><h2>Most Common Words</h2></center>
            <canvas id="mcwChart"></canvas>
        </div>
        <div class="pb-5 pt-5">
            <center><h2>Part Of Speech Frequency</h2></center>
            <canvas id="posChart"></canvas>
        </div>
        <div class="pb-5 pt-5">
            <center><h2>Lyrics Sentiment</h2></center>
            <canvas id="sentimentChart" class="row"></canvas>
        </div>
    </div>

    <!-- most common words visualisation -->
    <script>
   
        // processed data object
        var mcwData = {
            labels: {{ data.analysis.mcw.x | safe }},
            datasets: [
                {
                    label: "Most Common Words",
                    data: {{ data.analysis.mcw.y | safe }},
                    backgroundColor: [
                        "rgba(255, 99, 132, 0.2)",
                        "rgba(54, 162, 235, 0.2)",
                        "rgba(255, 206, 86, 0.2)",
                        "rgba(75, 192, 192, 0.2)",
                        "rgba(153, 102, 255, 0.2)",
                    ],
                    borderColor: [
                        "rgba(255, 99, 132, 1)",
                        "rgba(54, 162, 235, 1)",
                        "rgba(255, 206, 86, 1)",
                        "rgba(75, 192, 192, 1)",
                        "rgba(153, 102, 255, 1) ",
                    ],
                    borderWidth: 1
                }
            ]
        }

        // context object
        const ctx_mcw = document.getElementById("mcwChart").getContext("2d");

        // chart object
        const mcwChart = new Chart(ctx_mcw, {
            type: "bar",
            data: mcwData,
            options: {
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            display: false
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });

    </script>

    <!-- part of speech frequency visualisation -->
    <script>

        // processed data object
        var posData = {
            labels: {{ data.analysis.pos.x | safe }},
            datasets: [
                {
                    label: "Part Of Speech Frequency",
                    data: {{ data.analysis.pos.y | safe }},
                    backgroundColor: [
                        "rgba(255, 99, 132, 0.2)",
                        "rgba(54, 162, 235, 0.2)",
                        "rgba(255, 206, 86, 0.2)",
                        "rgba(75, 192, 192, 0.2)",
                        "rgba(153, 102, 255, 0.2)",
                    ],
                    borderColor: [
                        "rgba(255, 99, 132, 1)",
                        "rgba(54, 162, 235, 1)",
                        "rgba(255, 206, 86, 1)",
                        "rgba(75, 192, 192, 1)",
                        "rgba(153, 102, 255, 1) ",
                    ],
                    borderWidth: 1
                }
            ]
        }

        // context object
        const ctx_pos = document.getElementById("posChart").getContext("2d");

        // chart object
        const posChart = new Chart(ctx_pos, {
            type: "pie",
            data: posData,
            options: {
                scales: {
                    y: {
                        beginAtZero: true,
                        display: false,
                        grid: {
                            display: false
                        }
                    },
                    x: {
                        display: false,
                        grid: {
                            display: false
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });

    </script>

    <!-- sentiment analysis visualisation -->
    <script>

        // processed data object
        var sentimentData = {
            labels: {{ data.analysis.sentiment.x | safe }},
            datasets: [
                {
                    label: "Text Sentiment Analysis",
                    data: {{ data.analysis.sentiment.y | safe }},
                    backgroundColor: [
                        "rgba(255, 99, 132, 0.2)",
                        "rgba(54, 162, 235, 0.2)",
                    ],
                    borderColor: [
                        "rgba(255, 99, 132, 1)",
                        "rgba(54, 162, 235, 1)",
                    ],
                    borderWidth: 1
                }
            ]
        }

        // context object
        const ctx_sentiment = document.getElementById("sentimentChart").getContext("2d");

        // chart object
        const sentimentChart = new Chart(ctx_sentiment, {
            type: "bar",
            data: sentimentData,
            options: {
                indexAxis: "y",
                scales: {
                    x: {
                        min: -1,
                        max: 1,
                        grid: {
                            display: false
                        }
                    },
                    y: {
                        grid: {
                            display: false
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });

    </script>

{% endblock %}